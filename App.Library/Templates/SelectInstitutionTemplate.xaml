<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:viewModels="clr-namespace:App.Library.ViewModels">

    <DataTemplate DataType="{x:Type viewModels:SelectInstitutionViewModel}">
        <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <TextBlock x:Name="tbTitle" TextWrapping="Wrap" TextAlignment="Center" Margin="8,22,8,16" Grid.Row="0" FontSize="22" 
                       Text="{Binding LanguageText[SelectInstitution]}"/>

            <TextBox x:Name="tbSearch" Padding="5,6,5,6" Height="Auto" MinHeight="24" 
                     Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" Margin="24,8" Grid.Row="1" FontSize="18"/>

            <TextBlock IsHitTestVisible="False" Text="{Binding LanguageText[Search]}" VerticalAlignment="Center" HorizontalAlignment="Left" TextAlignment="Center" Margin="32,0,0,0" 
                       Foreground="DarkGray" Grid.Row="1" FontSize="18">
                <TextBlock.Style>
                    <Style TargetType="{x:Type TextBlock}">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Text, ElementName=tbSearch}" Value="">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
            
            <ListBox BorderThickness="0" Grid.Row="2" IsTabStop="False" x:Name="lbInstitutions" 
                     ItemsSource="{Binding Institutions}"
                     ItemContainerStyle="{DynamicResource ListBoxItemStyle}" 
                     SelectedItem="{Binding SelectedIdentityProvider}"
                     Margin="22,22,22,22" Padding="0" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Visible">
            </ListBox>
        </Grid>
    </DataTemplate>

</ResourceDictionary>